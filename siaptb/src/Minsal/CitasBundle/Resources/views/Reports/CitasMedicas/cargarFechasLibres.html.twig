{% block javascripts %}
<script type="text/javascript">
    jQuery(document).ready(function ($) {
        var tablaResultados=$('#tablaResultados');
        var opcionesTable=setDataTableOptions(tablaResultados);
        var now=moment();
        opcionesTable['sort'] = false;
        opcionesTable['displayLength']=15;
        opcionesTable['filter']=false;
        opcionesTable['dom']=
                                  "<'row'<'col-sm-9'lf><'col-sm-3'B>>" +
                                  "<'row'<'col-sm-12 table-toolbar'>>" +
                                  "<'row'<'col-sm-12 table-responsive'tr>>" +
                                  "<'row'<'col-sm-5'i><'col-sm-7'p>>";
        opcionesTable['buttons'] = ['excel', 'pdf'];
        // opcionesTable['buttons'] = ['copy', 'csv', 'excel', 'pdf', 'print'];
        opcionesTable['lengthMenu']= [[15,20], [15,20]];
        tablaResultados.DataTable(opcionesTable);
    });
</script>
{% endblock javascripts %}
<table id="tablaResultados" class="table table-bordered table-hover" data-table-enabled="true">
    <thead>
        <tr>
            <th class="text-center"><strong>Médico</strong></th>
            <th class="text-center"><strong>Fecha Próxima Disponible para Primera Vez</strong></th>
            <th class="text-center"><strong>Días de Espera para  Primera Vez</strong></th>
            <th class="text-center"><strong>Fecha Próxima para Disponible Subsecuente</strong></th>
            <th class="text-center"><strong>Días de Espera para Subsecuente</strong></th>
        </tr>
    </thead>
    <tbody>
        {% for horario in horariosDisponibles %}
            <tr>
                <td>{{ horario['medico'] }}</td>
                {% if horario['primeravez']|length > 0 %}
                <td>
                        {{ horario['primeravez'][0]['fecha'] }} Con el horario {{ horario['primeravez'][0]['rangoHora'] }}
                        {% if horario['primeravez'][0]['distribucionMedica']['idTipoDistribucion'] %}
                            Para el tipo de distribución {{ horario['primeravez'][0]['distribucionMedica']['nombreTipoDistribucion'] }}
                        {% endif %}
                        {% set diasEspera=horario['primeravez'][0]['fechaObjeto'].diff(date().setTime(0,0)).format('%a')  %}
                </td>
                <td>{{ diasEspera | raw }}</td>
                {% else %}
                    <td>NO HAY DISTRIBUCIÓN ASIGNADA</td>
                    <td>N/A</td>
                {% endif %}
                {% if horario['subsecuente']|length > 0 %}
                <td>
                    {{ horario['subsecuente'][0]['fecha'] }} Con el horario {{ horario['subsecuente'][0]['rangoHora'] }}
                    {% if horario['subsecuente'][0]['distribucionMedica']['idTipoDistribucion'] %}
                        Para el tipo de distribución {{ horario['subsecuente'][0]['distribucionMedica']['nombreTipoDistribucion'] }}
                    {% endif %}
                    {% set diasEspera=horario['subsecuente'][0]['fechaObjeto'].diff(date().setTime(0,0)).format('%a')  %}
                </td>
                <td>{{ diasEspera | raw }}</td>
                {% else %}
                    <td>NO HAY DISTRIBUCIÓN ASIGNADA</td>
                    <td>N/A</td>
                {% endif %}
            </tr>
        {% endfor %}
    </tbody>
</table>
