{% extends base_template %}

{% block sonata_header %}
{% if params.external == false %}
{{ parent() }}
{% endif %}
{% endblock sonata_header %}

{% block javascripts %}
{{ parent() }}

<script type="text/javascript">

window.openOrFocus = function(url, name) {
    if (!window.popups)
        window.popups = {};
        if (window.popups[name])
            window.popups[name].close();
            window.popups[name] = window.open(url, name);
        };

    jQuery(document).ready(function($) {
            $("#imprimirHC").on("click", function () {
                var tipo = "";
                var winParams = [];


                winParams['method'] = "post";
                winParams['action'] = "{{ url('admin_minsal_seguimiento_sechistorialclinico_imprimir_historia_clinica',{'id':object.getId()}) }}";
                winParams['target'] = "Imprimir Historial Clinico de {{object.getIdExpediente().getIdPaciente()}}";
                //winParams['parameters'] = parameters;
                openPostPopUpWindows(winParams);
            });
    });

        </script>
    {% endblock %}

    {% block actions %}
    {% if params.external == false %}
    <li>{% include 'SonataAdminBundle:Button:edit_button.html.twig' %}</li>
    <li>{% include 'SonataAdminBundle:Button:history_button.html.twig' %}</li>
    <li>{% include 'SonataAdminBundle:Button:list_button.html.twig' %}</li>
    <li>{% include 'SonataAdminBundle:Button:create_button.html.twig' %}</li>
    {% endif %}
    {% endblock %}

{% block tab_menu %}{{ knp_menu_render(admin.sidemenu(action), {'currentClass' : 'active'}, 'list') }}{% endblock %}



{% block show %}
<div class="sonata-ba-view">
    {% if params.external == true %}
    <div class="container-fluid">
        <div class="row">
            <div class="pull-right">
                <button type="button" class="btn btn-info" onclick="window.history.back();"><i class="fa fa-fw fa-arrow-circle-left"></i> Regresar</button>
                <button type="button" class="btn btn-info" id="imprimirHC"><i class="fa fa-print"></i> &nbsp;Imprimir&nbsp;</button>
                <button type="button" class="btn btn-default" onclick="window.close();"><i class="fa fa-fw fa-times-circle"></i> &nbsp;Cerrar&nbsp;</button>
            </div>
        </div>
    </div><br/>
    {% endif %}
    {% include 'MinsalSeguimientoBundle:SecHistorialClinico:body_show.html.twig' %}
{% endblock %}
